<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>捷菲花藝 JVF｜台中花藝設計・花禮・婚禮佈置</title>
    <meta name="description" content="捷菲花藝 JVF 提供台中專業花藝設計、花禮、婚禮佈置、空間花藝、花藝課程等服務。用心打造每一份專屬花藝，歡迎預約與洽詢。">
    <meta name="keywords" content="捷菲花藝, 台中花藝, 花藝設計, 花禮, 婚禮佈置, 花藝課程, 花店, JVF">
    <script src="https://cdn.tailwindcss.com?v=20240712"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css?v=20240712">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#ff6b6b',
                        secondary: '#4a4a4a',
                    }
                }
            }
        }
    </script>
    <style>
        .service-card {
            transition: box-shadow 0.3s, transform 0.3s;
            box-shadow: 0 4px 24px 0 rgba(62,198,224,0.10);
            border-radius: 1.5rem;
            background: #fff;
            position: relative;
            overflow: hidden;
        }
        .service-card:hover {
            box-shadow: 0 16px 40px 0 rgba(62,198,224,0.22), 0 2px 8px 0 rgba(0,0,0,0.06);
            transform: translateY(-10px) scale(1.04);
        }
        .service-card .icon-bg {
            background: linear-gradient(135deg, #6db3a0 0%, #3ec6e0 100%);
            border-radius: 9999px;
            width: 64px;
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem auto;
            transition: transform 0.3s;
            box-shadow: 0 2px 12px 0 rgba(62,198,224,0.18);
        }
        .service-card:hover .icon-bg {
            transform: scale(1.10) rotate(-8deg);
        }
        .service-card .service-title {
            font-size: 1.18rem;
            font-weight: 700;
            letter-spacing: 0.04em;
            color: #217a8a;
            margin-bottom: 0.5rem;
        }
        .service-card .service-tip {
            color: #3ec6e0;
            font-size: 0.98rem;
            margin-top: 0.5rem;
            font-weight: 500;
            letter-spacing: 0.01em;
        }
        .service-card .dot {
            width: 8px; height: 8px; background: #3ec6e0; border-radius: 50%; margin: 1rem auto 0 auto;
        }
        .hero-title {
            font-family: 'Noto Sans TC', 'Montserrat', 'Arial', sans-serif;
            font-weight: 900;
            letter-spacing: 0.04em;
            text-shadow: 0 2px 12px rgba(0,0,0,0.10);
        }
        .hero-subtitle {
            font-family: 'Noto Sans TC', 'Montserrat', 'Arial', sans-serif;
            font-weight: 400;
            letter-spacing: 0.08em;
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .hero-story {
            font-family: 'Noto Sans TC', 'Montserrat', 'Arial', sans-serif;
            font-size: 1.08rem;
            font-weight: 400;
            letter-spacing: 0.04em;
            line-height: 2.1;
            color: #f3f3f3;
            text-shadow: 0 1px 8px rgba(0,0,0,0.10);
            max-width: 38em;
            margin: 0 auto;
        }
        @media (min-width: 768px) {
            #services {
                background: url('https://firebasestorage.googleapis.com/v0/b/jiefei-flower.firebasestorage.app/o/logo%2F%E6%89%8B%E7%95%AB%E5%B0%81%E9%9D%A2.JPG?alt=media&token=4946c173-a491-44bd-8fcc-26c5640beeb5') center center / cover no-repeat, #f9fafb;
                position: relative;
            }
            #services::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(255, 255, 255, 0.85);
                z-index: 1;
            }
            #services > .container {
                position: relative;
                z-index: 2;
            }
            /* 新增：關於我們背景 */
            #about {
                background: url('https://firebasestorage.googleapis.com/v0/b/jiefei-flower.firebasestorage.app/o/logo%2F%E6%89%8B%E7%95%AB%E5%B0%81%E9%9D%A2.JPG?alt=media&token=4946c173-a491-44bd-8fcc-26c5640beeb5') center center / cover no-repeat;
                position: relative;
            }
            #about::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(255,255,255,0.85);
                z-index: 1;
            }
            #about > .container {
                position: relative;
                z-index: 2;
            }
        }
        @media (max-width: 767px) {
            #services {
                background: url('https://firebasestorage.googleapis.com/v0/b/jiefei-flower.firebasestorage.app/o/logo%2F%E6%89%8B%E7%95%AB%E5%B0%81%E9%9D%A2.JPG?alt=media&token=4946c173-a491-44bd-8fcc-26c5640beeb5') center top / 100% auto no-repeat, #f9fafb;
                position: relative;
            }
            #services::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(255, 255, 255, 0.9);
                z-index: 1;
            }
            #services > .container {
                position: relative;
                z-index: 2;
            }
            /* 新增：關於我們背景 */
            #about {
                background: url('https://firebasestorage.googleapis.com/v0/b/jiefei-flower.firebasestorage.app/o/logo%2F%E6%89%8B%E7%95%AB%E5%B0%81%E9%9D%A2.JPG?alt=media&token=4946c173-a491-44bd-8fcc-26c5640beeb5') center top / 100% auto no-repeat;
                position: relative;
            }
            #about::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(255,255,255,0.92);
                z-index: 1;
            }
            #about > .container {
                position: relative;
                z-index: 2;
            }
            .about-quote-bg {
                background: url('https://firebasestorage.googleapis.com/v0/b/jiefei-flower.firebasestorage.app/o/logo%2F%E6%89%8B%E7%95%AB%E5%B0%81%E9%9D%A2.JPG?alt=media&token=4946c173-a491-44bd-8fcc-26c5640beeb5') center top / contain no-repeat;
                border-radius: 1.5rem;
                padding: 2.5rem 0;
                margin: 0 auto;
                max-width: 95vw;
                position: relative;
            }
            .about-quote-bg > div {
                position: relative;
                z-index: 2;
                background: rgba(255,255,255,0.85);
                border-radius: 1.5rem;
                padding: 1.5rem 0.5rem;
            }
        }
        @media (min-width: 768px) {
            .about-quote-bg {
                background: none !important;
            }
        }
        /* 服務項目彈窗圖片排列優化 */
        #serviceModalContent {
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE and Edge */
            scroll-behavior: smooth;
        }
        #serviceModalContent::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }
        #serviceModalContent > div {
            flex: 0 0 auto;
            width: 85vw;
            max-width: 300px;
            scroll-snap-align: center;
            scroll-snap-stop: always;
        }
        @media (min-width: 768px) {
            #serviceModalContent > div {
                width: auto;
                max-width: none;
            }
        }
        #serviceModalContent img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            aspect-ratio: 1;
            border-radius: 0.5rem;
        }
        /* 當彈窗開啟時鎖定背景滾動 */
        body.modal-open {
            overflow: hidden;
            position: fixed;
            width: 100%;
        }
    </style>
</head>
<body class="font-sans bg-gray-50">
    <!-- Navbar 導覽列 -->
    <nav class="bg-white shadow-md fixed w-full top-0 z-50">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <a href="#home" class="flex items-center space-x-2">
                    <img src="https://firebasestorage.googleapis.com/v0/b/jiefei-flower.firebasestorage.app/o/logo%2FJF%E9%95%B7%E6%96%B9%E5%BD%A2logo.JPG?alt=media&token=1583b5a3-34f0-4d50-bb99-4e875c056571" alt="捷菲花藝 JVF Logo" class="h-12 w-auto object-contain" style="max-height:48px;">
                </a>
            </div>
            <div class="hidden md:flex items-center space-x-6">
                <a href="#home" class="text-gray-600 hover:text-primary">首頁</a>
                <a href="#gallery" class="text-gray-600 hover:text-primary">作品集</a>
                <a href="#services" class="text-gray-600 hover:text-primary">服務項目</a>
                <a href="#about" class="text-gray-600 hover:text-primary">關於我們</a>
                <a href="#contact" class="text-gray-600 hover:text-primary">聯絡我們</a>
                <button id="loginBtn" class="bg-primary text-white px-6 py-2 rounded-lg hover:bg-primary/90 ml-4">管理員登錄</button>
            </div>
            <button id="mobileMenuBtn" class="md:hidden text-gray-600">
                <i class="fas fa-bars text-2xl"></i>
            </button>
        </div>
        <!-- 手機版選單（可展開） -->
        <div id="mobileMenu" class="md:hidden hidden px-4 pb-4">
            <a href="#home" class="block py-2 text-gray-600 hover:text-primary">首頁</a>
            <a href="#gallery" class="block py-2 text-gray-600 hover:text-primary">作品集</a>
            <a href="#services" class="block py-2 text-gray-600 hover:text-primary">服務項目</a>
            <a href="#about" class="block py-2 text-gray-600 hover:text-primary">關於我們</a>
            <a href="#contact" class="block py-2 text-gray-600 hover:text-primary">聯絡我們</a>
            <button id="mobileLoginBtn" class="w-full mt-2 bg-primary text-white px-6 py-2 rounded-lg hover:bg-primary/90">管理員登錄</button>
        </div>
    </nav>

    <!-- Hero Banner 首頁大圖＋品牌標語 -->
    <section id="home" class="relative h-screen flex items-center justify-center">
        <div class="absolute inset-0 bg-black/40"></div>
        <div class="absolute inset-0 bg-[url('https://firebasestorage.googleapis.com/v0/b/jiefei-flower.firebasestorage.app/o/%E5%B0%81%E9%9D%A2%2F%E5%B0%81%E9%9D%A22.JPG?alt=media&token=4dd51424-74b7-46d1-ae4f-a7de304b91fe')] bg-cover bg-center -z-10"></div>
        <div class="text-center text-white z-10 px-6 md:px-8 lg:px-12">
            <h1 class="text-5xl md:text-6xl font-bold mb-4 hero-title">花藝空間美學</h1>
            <p class="hero-subtitle mb-6">用心打造每一份專屬花藝</p>
            <p class="hero-story">
              捷菲 JVF 這個品牌名字呢～是從<br>
              J 小姐與 V 先生<br>
              Jennifer&Vincent Floral 所發想出來<br>
              捷菲希望能將花草回歸至生活陪伴<br>
              生活裡有花，花裡有生活<br>
              與花草生活的日日
            </p>
        </div>
    </section>

    <!-- Gallery 作品集區塊 -->
    <section id="gallery" class="py-20">
        <div class="container mx-auto px-4">
            <h2 class="text-4xl font-bold text-center mb-12">最新消息 & 作品 </h2>
            <div class="flex overflow-x-auto space-x-4 md:grid md:grid-cols-2 lg:grid-cols-3 md:space-x-0 gap-6" id="gallery-grid" style="scroll-snap-type: x mandatory;">
                <!-- 圖片將由 JavaScript 動態載入 -->
            </div>
        </div>
    </section>

    <!-- Services 服務項目區塊 -->
    <section id="services" class="py-20 bg-gray-50" style="background: #f9fafb;">
        <div class="container mx-auto px-4">
            <h2 class="text-4xl font-bold text-center mb-12">服務項目</h2>
            <div class="flex overflow-x-auto space-x-4 md:grid md:grid-cols-3 md:gap-8 md:space-x-0">
                <!-- 1. 空間花藝設計佈置 -->
                <div class="service-card p-8 text-center min-w-[260px] flex flex-col items-center bg-white/90 border border-gray-200 rounded-2xl shadow-none hover:shadow-md transition-all duration-200" data-service="space" onclick="showServiceImages('space')">
                    <div class="icon-bg mb-4">
                        <i class="fas fa-seedling text-white text-3xl"></i>
                    </div>
                    <h3 class="service-title mb-2">空間花藝設計佈置</h3>
                    <p class="service-tip mb-2"><i class="fas fa-image mr-1"></i>點擊查看作品照片</p>
                    <div class="dot"></div>
                </div>
                <!-- 2. 婚禮花藝設計佈置 -->
                <div class="service-card p-8 text-center min-w-[260px] flex flex-col items-center bg-white/90 border border-gray-200 rounded-2xl shadow-none hover:shadow-md transition-all duration-200" data-service="wedding" onclick="showServiceImages('wedding')">
                    <div class="icon-bg mb-4">
                        <i class="fas fa-ring text-white text-3xl"></i>
                    </div>
                    <h3 class="service-title mb-2">婚禮花藝設計佈置</h3>
                    <p class="service-tip mb-2"><i class="fas fa-image mr-1"></i>點擊查看作品照片</p>
                    <div class="dot"></div>
                </div>
                <!-- 3. 企業／門市週花服務 -->
                <div class="service-card p-8 text-center min-w-[260px] flex flex-col items-center bg-white/90 border border-gray-200 rounded-2xl shadow-none hover:shadow-md transition-all duration-200" data-service="business" onclick="showServiceImages('business')">
                    <div class="icon-bg mb-4">
                        <i class="fas fa-briefcase text-white text-3xl"></i>
                    </div>
                    <h3 class="service-title mb-2">企業／門市週花服務</h3>
                    <p class="service-tip mb-2"><i class="fas fa-image mr-1"></i>點擊查看作品照片</p>
                    <div class="dot"></div>
                </div>
                <!-- 4. 花禮 -->
                <div class="service-card p-8 text-center min-w-[260px] flex flex-col items-center bg-white/90 border border-gray-200 rounded-2xl shadow-none hover:shadow-md transition-all duration-200" data-service="gift" onclick="showServiceImages('gift')">
                    <div class="icon-bg mb-4">
                        <i class="fas fa-gift text-white text-3xl"></i>
                    </div>
                    <h3 class="service-title mb-2">花禮</h3>
                    <p class="service-tip mb-2"><i class="fas fa-image mr-1"></i>點擊查看作品照片</p>
                    <div class="dot"></div>
                </div>
                <!-- 5. 花藝課程 -->
                <div class="service-card p-8 text-center min-w-[260px] flex flex-col items-center bg-white/90 border border-gray-200 rounded-2xl shadow-none hover:shadow-md transition-all duration-200" data-service="course" onclick="showServiceImages('course')">
                    <div class="icon-bg mb-4">
                        <i class="fas fa-chalkboard-teacher text-white text-3xl"></i>
                    </div>
                    <h3 class="service-title mb-2">花藝課程</h3>
                    <p class="service-tip mb-2"><i class="fas fa-image mr-1"></i>點擊查看作品照片</p>
                    <div class="dot"></div>
                </div>
                <!-- 6. 花圃微景觀設計施作 -->
                <div class="service-card p-8 text-center min-w-[260px] flex flex-col items-center bg-white/90 border border-gray-200 rounded-2xl shadow-none hover:shadow-md transition-all duration-200" data-service="microgarden" onclick="showServiceImages('microgarden')">
                    <div class="icon-bg mb-4">
                        <i class="fas fa-leaf text-white text-3xl"></i>
                    </div>
                    <h3 class="service-title mb-2">花圃微景觀設計施作</h3>
                    <p class="service-tip mb-2"><i class="fas fa-image mr-1"></i>點擊查看作品照片</p>
                    <div class="dot"></div>
                </div>
            </div>
        </div>
        <!-- Modal 彈窗 -->
        <div id="serviceModal" class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50">
            <div class="bg-white rounded-lg p-4 md:p-8 max-w-6xl w-full mx-4 relative">
                <button id="closeServiceModal" class="absolute -top-12 right-2 md:top-4 md:right-4 text-white md:text-gray-500 hover:text-primary text-3xl md:text-2xl z-50" onclick="closeServiceModal()">&times;</button>
                <div id="serviceModalContent" class="flex flex-nowrap md:grid md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6 overflow-x-auto md:overflow-y-auto max-h-[80vh] p-2 md:p-4 snap-x snap-mandatory">
                    <!-- 圖片將由 JavaScript 動態載入 -->
                </div>
            </div>
        </div>
        <!-- Lightbox 圖片預覽 -->
        <div id="lightboxModal" class="fixed inset-0 bg-black/90 hidden items-center justify-center z-[100]">
            <button id="closeLightbox" class="absolute top-6 right-8 text-white text-3xl z-20 hover:text-gray-300">&times;</button>
            <img id="lightboxImg" src="" alt="預覽圖片" class="max-w-[90%] max-h-[85vh] rounded-lg shadow-2xl z-10 object-contain">
        </div>
    </section>

    <!-- About 品牌故事／關於我們區塊 -->
    <section id="about" class="py-20 relative">
        <div class="absolute inset-0 bg-white/90 md:bg-white/70 z-0"></div>
        <h2 class="text-4xl font-bold text-center mb-12 relative z-10">關於我們</h2>
        <div class="max-w-2xl mx-auto text-center space-y-5 md:space-y-6 relative z-10 px-4 md:px-6">
            <p class="text-base md:text-[17px] leading-7 md:leading-relaxed text-gray-700 text-left md:text-center">
                捷菲花藝誕生於最艱難的 Covid 疫情時期。<br>
                當時 J 小姐還在唸碩二，服務於管理顧問公司擔任客座講師，
                無奈疫情打亂了所有的人生節奏。
            </p>
            <p class="text-base md:text-[17px] leading-7 md:leading-relaxed text-gray-700 text-left md:text-center">
                V 先生深知 J 小姐心中一直有一座花園，對花藝充滿渴望與憧憬。
                在 V 先生的鼓勵下，捷菲花藝就這樣誕生了。
                之後也陸續拿到了國際荷蘭花藝師證照 DFA & ADFA。
                捷菲的 J 與 F 之間，有個很重要的 V，
                正是 V 先生促成了 J 小姐與 Floral 的相遇。
            </p>
            <p class="text-base md:text-[17px] leading-7 md:leading-relaxed text-gray-700 text-left md:text-center">
                這條花藝之路，我們走得戰戰兢兢、亦步亦趨。
                每一張訂單、每一堂花藝課程，背後都是無數的思考設計、
                擔心花材的萬一、流汗的搬運、堆成草山的除葉，
                以及載運時的小心翼翼……
            </p>
            <p class="text-base md:text-[17px] leading-7 md:leading-relaxed text-gray-700 text-left md:text-center">
                最大的願望，就是看見交付到客人手上時，
                臉上的那抹微笑、那份開心、那一句喜歡。
                好像再難也不難了吧！
            </p>
            <p class="text-base md:text-[17px] leading-7 md:leading-relaxed text-gray-700 text-left md:text-center">
                這條路的終點還很遠，我們會用熱情繼續前進，<br>
                更希望這條路上有您的參與。
            </p>
            <p class="text-base md:text-[17px] leading-7 md:leading-relaxed text-gray-700 text-left md:text-center">
                希望您也喜歡我們的小故事，喜歡捷菲的風格。
            </p>
            <div class="my-12 md:my-8">
                <hr class="border-gray-200 mb-8 md:mb-6">
                <div class="about-quote-bg">
                    <div class="text-gray-500 text-sm md:text-base font-light leading-7 md:leading-relaxed tracking-wide whitespace-pre-line px-4 md:px-0" style="font-family: 'Noto Sans TC', 'Montserrat', 'Arial', sans-serif;">
                        生活裡有花，花裡有生活<br>與花草生活的日日。
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact 聯絡資訊區塊 -->
    <section id="contact" class="py-20 bg-gray-50">
        <div class="container mx-auto px-4">
            <h2 class="text-4xl font-bold text-center mb-12">聯絡我們</h2>
            <div class="max-w-xl mx-auto mb-8">
                <div class="flex flex-col items-center justify-center gap-4">
                    <img src="https://firebasestorage.googleapis.com/v0/b/jiefei-flower.firebasestorage.app/o/logo%2F%E6%96%B0logo.JPG?alt=media&token=0913f62f-e995-484e-849c-7d063237ba4e" alt="捷菲花藝 JVF Logo" class="w-32 h-32 object-contain rounded-lg">
                    <div class="flex flex-col items-center text-gray-700 text-base font-medium space-y-2 w-full">
                        <div><span class="font-bold">工作室地址：</span>臺中市大里區中興路一段159-1號 4F</div>
                        <div><span class="font-bold">聯絡電話：</span>04-2496-3299-1402 （預約制）</div>
                        <div><span class="font-bold">Email：</span><a href="mailto:0601care@gmail.com" class="text-primary underline">0601care@gmail.com</a></div>
                    </div>
                </div>
            </div>
            <div class="max-w-xl mx-auto">
                <div class="flex flex-col md:flex-row gap-6 justify-center items-center">
                    <a href="https://www.facebook.com/JVF520/" target="_blank" class="flex flex-col items-center justify-center w-56 h-24 rounded-xl shadow-lg bg-blue-100 hover:bg-blue-500 hover:text-white transition-all duration-200 text-blue-700 text-lg font-semibold">
                        <i class="fab fa-facebook mb-2" style="font-size: 36px; height: 36px;"></i>
                        Facebook 粉絲專頁
                    </a>
                    <a href="https://www.instagram.com/jennifer_vincent_floral?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==" target="_blank" class="flex flex-col items-center justify-center w-56 h-24 rounded-xl shadow-lg bg-pink-100 hover:bg-pink-500 hover:text-white transition-all duration-200 text-pink-500 text-lg font-semibold">
                        <i class="fab fa-instagram mb-2" style="font-size: 36px; height: 36px;"></i>
                        Instagram
                    </a>
                    <a href="https://line.me/R/ti/p/@249mdifn" target="_blank" class="flex flex-col items-center justify-center w-56 h-24 rounded-xl shadow-lg bg-green-100 hover:bg-green-500 hover:text-white transition-all duration-200 text-green-600 text-lg font-semibold">
                        <i class="fab fa-line mb-2" style="font-size: 36px; height: 36px;"></i>
                        LINE：@249mdifn
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer 頁尾 -->
    <footer class="bg-gray-900 text-white py-8">
        <div class="container mx-auto px-4 text-center">
            <p>&copy; 2025 捷菲花藝 JVF. Powered by Jerry</p>
            <!-- 社群連結（可串接 Firestore） -->
            <div class="mt-2 space-x-4">
                <a href="#" class="text-white hover:text-primary"><i class="fab fa-facebook fa-lg"></i></a>
                <a href="#" class="text-white hover:text-primary"><i class="fab fa-instagram fa-lg"></i></a>
                <a href="#" class="text-white hover:text-primary"><i class="fab fa-line fa-lg"></i></a>
            </div>
        </div>
    </footer>

    <!-- 手機選單 JS（可優化） -->
    <script>
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const mobileMenu = document.getElementById('mobileMenu');
        mobileMenuBtn.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });
    </script>

    <script>
    // Lightbox 功能
    let currentLightboxImages = [];
    let currentLightboxIndex = 0;

    function openLightbox(images, idx) {
        const lightbox = document.getElementById('lightboxModal');
        const lightboxImg = document.getElementById('lightboxImg');
        currentLightboxImages = images;
        currentLightboxIndex = idx;
        lightboxImg.src = images[idx];
        lightbox.classList.remove('hidden');
        lightbox.classList.add('flex');
        document.body.style.overflow = 'hidden';
    }

    function closeLightbox() {
        const lightbox = document.getElementById('lightboxModal');
        lightbox.classList.add('hidden');
        lightbox.classList.remove('flex');
        document.body.style.overflow = '';
    }

    document.getElementById('closeLightbox').onclick = closeLightbox;
    document.getElementById('lightboxModal').onclick = function(e) {
        if (e.target === this) closeLightbox();
    };
    </script>

    <!-- 登入 Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">管理員登錄</h2>
                <button id="closeLoginModal" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <div class="space-y-4">
                <form id="adminLoginForm" class="space-y-4">
                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-700">電子郵件</label>
                        <input type="email" id="email" name="email" required
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary">
                    </div>
                    <div>
                        <label for="password" class="block text-sm font-medium text-gray-700">密碼</label>
                        <input type="password" id="password" name="password" required
                            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring-primary">
                    </div>
                    <button type="submit"
                        class="w-full bg-primary text-white py-2 px-4 rounded-md hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2">
                        登錄
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script type="module" src="script.js?v=20240712"></script>
    <script type="module">
    import { initializeApp, getApps } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";

    const firebaseConfig = {
        apiKey: "AIzaSyDY5m6pnu4bqaQUsmr27j4SIkWIfsawfPk",
        authDomain: "jiefei-flower.firebaseapp.com",
        projectId: "jiefei-flower",
        storageBucket: "jiefei-flower.firebasestorage.app",
        messagingSenderId: "761028186679",
        appId: "1:761028186679:web:19b10716623861fc48a5b2",
        measurementId: "G-G6FXQPJPPV"
    };

    // 初始化 Firebase（避免重複）
    const app = getApps().length ? getApps()[0] : initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // 登入 Modal 控制
    const loginModal = document.getElementById('loginModal');
    const loginBtn = document.getElementById('loginBtn');
    const mobileLoginBtn = document.getElementById('mobileLoginBtn');
    const closeLoginModal = document.getElementById('closeLoginModal');
    const adminLoginForm = document.getElementById('adminLoginForm');

    function showLoginModal() {
        loginModal.classList.remove('hidden');
        loginModal.classList.add('flex');
    }
    function hideLoginModal() {
        loginModal.classList.add('hidden');
        loginModal.classList.remove('flex');
    }
    loginBtn.addEventListener('click', showLoginModal);
    mobileLoginBtn.addEventListener('click', showLoginModal);
    closeLoginModal.addEventListener('click', hideLoginModal);
    loginModal.addEventListener('click', (e) => {
        if (e.target === loginModal) {
            hideLoginModal();
        }
    });

    // 管理員登入表單處理
    adminLoginForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        const submitBtn = adminLoginForm.querySelector('button[type="submit"]');
        
        try {
            submitBtn.disabled = true;
            submitBtn.textContent = '登錄中...';
            await signInWithEmailAndPassword(auth, email, password);
            // 登入成功後不自動跳轉，讓管理員選擇
            submitBtn.disabled = false;
            submitBtn.textContent = '登錄';
            console.log('登入成功！可以點擊「回後台」進入管理頁面');
        } catch (error) {
            alert('登入失敗：' + error.message);
            submitBtn.disabled = false;
            submitBtn.textContent = '登錄';
        }
    });

    // 監聽登入狀態
    onAuthStateChanged(auth, (user) => {
        console.log('登入狀態變更:', user ? user.email : '未登入');
        
        if (user) {
            hideLoginModal(); // 登入後自動關閉 Modal
            // 更新按鈕文字，讓管理員知道已登入
            loginBtn.textContent = '回後台';
            mobileLoginBtn.textContent = '回後台';
            
            // 修改按鈕點擊事件，登入後點擊跳轉到後台
            loginBtn.onclick = () => window.location.href = 'admin.html';
            mobileLoginBtn.onclick = () => window.location.href = 'admin.html';
            
            console.log('管理員已登入，可以點擊「回後台」進入管理頁面');
            
            // 檢查是否為從後台跳轉過來的預覽
            const isPreviewMode = sessionStorage.getItem('previewMode');
            if (isPreviewMode) {
                console.log('預覽模式：管理員可以正常瀏覽前台');
                sessionStorage.removeItem('previewMode'); // 清除預覽模式標記
            }
        } else {
            // 未登入時恢復原狀
            loginBtn.textContent = '管理員登錄';
            mobileLoginBtn.textContent = '管理員登錄';
            loginBtn.onclick = showLoginModal;
            mobileLoginBtn.onclick = showLoginModal;
        }
    });
    </script>

    <script>
        // 當開啟彈窗時鎖定背景
        function showServiceImages(type) {
            document.body.classList.add('modal-open');
            // ... 其他現有的彈窗開啟邏輯 ...
            const modal = document.getElementById('serviceModal');
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            
            // 載入對應服務類型的圖片
            const modalContent = document.getElementById('serviceModalContent');
            modalContent.innerHTML = ''; // 清空現有內容
            
            // 從 serviceImagesByType 中獲取對應類型的圖片
            const images = serviceImagesByType[type] || [];
            images.forEach((imageUrl, index) => {
                const imgContainer = document.createElement('div');
                const img = document.createElement('img');
                img.src = imageUrl;
                img.alt = `${getServiceLabel(type)} 圖片 ${index + 1}`;
                img.onclick = () => openLightbox(images, index);
                imgContainer.appendChild(img);
                modalContent.appendChild(imgContainer);
            });
        }

        // 關閉彈窗時解除背景鎖定
        function closeServiceModal() {
            document.body.classList.remove('modal-open');
            const modal = document.getElementById('serviceModal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }
    </script>
</body>
</html> 